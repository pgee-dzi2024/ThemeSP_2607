<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>КОМПЮТЪРНИ МРЕЖИ | РАЗДЕЛ 4 - МРЕЖОВИ ПРОТОКОЛИ И УСЛУГИ| Протоколите от транспортния слой: TCP и UDP </title>

<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<link rel="stylesheet" type="text/css" href="styles.css" />
<style type="text/css">
<!--
.REMARK {color: #0033FF}
.stepen {font-size:xx-small;
         vertical-align:super}
-->
</style>
</head>
<body>
<a name="begin"></a>	
        <div id="wrapper">
		<div id="top">		</div>
		<div id="content">
			<div id="header">
				    <div id="menu_right">
			            <ul>
			                <li><a href="index.html">НАЗАД (към менюто)</a></li>
			            </ul>
		            </div>
			</div>
			<div id="TOCtext">
		  <hr />
		  <p class="Theme">ТЕМА 3: Протоколите от транспортния слой: TCP и UDP</p><hr />
		  <p class="section"><a href="#tcp">TCP</a></p>
		  <p class="section"><a href="#udp">UDP</a></p>
		  <p class="section"><a href="#ps">Портове и сокети</a></p>
		  <p class="section"><a href="#nt">Преобразуване на имена</a></p>
		  <div class="subsection"><a href="#hostfiles">HOSTS и LMHOSTS файлове</a></div>
		  <div class="subsection"><a href="#dns">DNS</a></div>
		  <div class="subsection"><a href="#wins">WINS</a></div>
		  <hr />
		  </div>	  
		    <div id="text">	
			  <div align="justify">
			   <p>Транспортният слой (наречен host-to-host слой в DoD модела) е отговорен за осигуряването на надеждна директна връзка от точка до точка. Това се постига чрез механизми като потвърждения, които удостоверяват, че данните са пристигнали до своето местоназначение без повреда или загуба. 
				    Протоколите от транспортния слой също така различават съобщенията, пристигащи до един и същ компютър. Тъй като различните приложения могат да изпращат или да получават съобщения едновременно, протоколите от транспортния слой използват портове, за да отделят съобщенията едно от друго. TCP/IP комплектът включва не един, а два протокола от транспортния слой:				    </p>
				    <ul class="B1Item">
				      <li>Transmission Control Protocol (TCP) - Връзково-ориентиран протокол </li>
				      <li>User Datagram Protocol (UDP) - Безвръзков протокол </li>
		        </ul>
				    <p>Кой от двата протокола се използва за изпращане на дадено съобщение? TCP е подходящ, когато най-важна е надеждността, a UDP се използва, ако с най-висок приоритет е производителността (скоростта).</p>
					<p align="center"><a href=#begin><img src="images/arrw-up.gif" alt="към начакото на страницата" width="153" height="45" /></a></p><hr />
				    <p class="FixedItem"><a name="tcp" id="tcp"></a>Протоколът от транспортния слой: TCP				    </p>
				    <p>TCP, поради това, че е връзково-ориентиран протокол, установява сесия между двата комуникиращи си компютъра, преди да започне да изпраща данни. За установяването на сесията се използват съобщения за потвърждаване и отговор. След това се извършва проверка за грешки и тяхното коригиране, като данните се разделят на пакети. 
				    Към всеки пакет се добавя информация за последователност, така че отделните части от съобщението да могат да се сглобят обратно в правилния ред. Тази информация също така позволява на приемащия компютър да открие дали няма липсващи пакети. Това прави TCP по-надежден от UDP, но на определена цена: всички тези допълнителни дейности намаляват производителността.				    </p>
					<p align="center"><a href=#begin><img src="images/arrw-up.gif" alt="към начакото на страницата" width="153" height="45" /></a></p><hr />
				    <p class="FixedItem"><strong><a name="udp" id="udp"></a>Протоколът от транспортния слой: UDP				    </strong></p>
				    <p>UDP е безвръзков. Той не поставя ред на пакетите с данни; това означава, че той е по-подходящ за малки съобщения, които могат да се предадат в един пакет. UDP също така не следи какво е изпратил. Той обаче осигурява контролна сума, за да гарантира, че данните са непокътнати при пристигането им. Подобно на TCP, UDP осигурява номера на портове, за да разграничава заявките, подавани или доставяни на различни приложения. 
				    Тъй като не трябва да се занимава с установяване на последователността или проверка за грешки, UDP е бърз. Неговите хедъри са по-прости от тези, добавяни от TCP. Routing Information Protocol (RIP), Trivial File Transfer Protocol (TFTP) и съобщенията за търсене на имена използват UDP.				    </p>
				    <p>Терминът датаграма {datagram) е дефиниран  като самостоятелна, независима единица данни, носеща достатъчно информация, за да бъде маршрутизирана от компютъра източник до компютъра местоназначение, без да разчита на по-раншни обмени между тези компютри и транспортиращата мрежа. 
				    Термините датаграма и пакет понякога се използват взаимозаменяемо, но  „пакет" описва единица данни, която е част от група последователни единици или „парчета", на които е разбито дадено съобщение. Пакетите могат да поемат по различни маршрути в мрежата, за да достигнат своето местоназначение. След това те се сглобяват обратно. Датаграмата се използва за описание на по-простите и неподредени единици данни, предавани по UDP.				    </p>
					<p align="center"><a href=#begin><img src="images/arrw-up.gif" alt="към начакото на страницата" width="153" height="45" /></a></p><hr />
				    <p class="FixedItem"><strong><a name="ps" id="ps"></a>Портове и сокети				    </strong></p>
				    <p>TCP/IP използва двукомпонентен логически адрес - IP адресът - за да идентифицира компютрите източници и компютрите местоназначения в мрежовите комуникации. Какво става обаче, ако две мрежови приложения, работещи на един и същ компютър, изпращат заявки и получават отговори едновременно? Например какво става, ако дадено входящо съобщение е предназначено за вашата e-mail програма, докато друго е Web страница, която се връща към вашия Web браузър? Протоколът се нуждае от начин, по който да прави разлика между тях. Ето къде се намесват TCP и UDP портовете. 
				    Ролята на номерата на портовете. 
				    Знаем, че IP адресът на даден компютър местоназначение се състои от две части: мрежов адрес, който функционира подобно на име на улица, и хост адрес, функциониращ подобно на номер на къща. За номерата на портове можем да си мислим като специфична маршрутизираща информация вътре в даден адрес. Номерът на порт е допълнение към IP адреса, точно както името на адресата на пощенския плик е допълнение към адреса на улицата. По същия начин можете да си мислите за отделните приложения като за отделни обитатели. 
				    Портът е логическа точка на свързване. Портовете се използват от транспортните протоколи, TCP и UDP, за да идентифицират специфичното приложение, което изпраща или получава съобщението. 
				    Широко използваните Интернет приложения имат предефинирани номера 
				    на портове. Тази стандартизация улеснява комуникациите. В следващата таблица са показани някои  тези широко използвани номера.				    </p>
				    <table border="1" align="center">
					<tr>
					   <td width="176" bgcolor="#CCCCCC">Предварително назначен порт</td>
					   <td width="105" bgcolor="#CCCCCC"><div align="center">Протокол</div></td>
					   <td width="74" bgcolor="#CCCCCC">Приложение</td></tr>
					<tr>
					   <td bgcolor="#CCCCCC"><div align="center">80</div></td>
					   <td bgcolor="#CCCCCC"><div align="center">TCP</div></td>
					   <td bgcolor="#CCCCCC">HTTP</td></tr>
					<tr>
					   <td bgcolor="#CCCCCC"><div align="center">21</div></td>
					   <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					   <td bgcolor="#CCCCCC">FTP</td></tr>
					<tr>
					   <td bgcolor="#CCCCCC"><div align="center">23</div></td>
					   <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					   <td bgcolor="#CCCCCC">Telnet</td></tr>
					<tr>
					   <td bgcolor="#CCCCCC"><div align="center">25</div></td>
					   <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					   <td bgcolor="#CCCCCC">SMTP</td></tr>
					<tr>
					   <td bgcolor="#CCCCCC"><div align="center">110</div></td>
					   <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					   <td bgcolor="#CCCCCC">POP3</td></tr>
					<tr>
				       <td bgcolor="#CCCCCC"><div align="center">119</div></td>
					   <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					   <td bgcolor="#CCCCCC">NNTP</td></tr>
					<tr>
					  <td bgcolor="#CCCCCC"><div align="center">137</div></td>
					  <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					  <td bgcolor="#CCCCCC">NetBIOS name service</td>
					  </tr>
					<tr>
					  <td bgcolor="#CCCCCC"><div align="center">161</div></td>
					  <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					  <td bgcolor="#CCCCCC">SNMP</td>
					  </tr>
					<tr>
					  <td bgcolor="#CCCCCC"><div align="center">194</div></td>
					  <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					  <td bgcolor="#CCCCCC">IRC</td>
					  </tr>
					<tr>
					  <td bgcolor="#CCCCCC"><div align="center">389</div></td>
					  <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					  <td bgcolor="#CCCCCC">LDAP</td>
					  </tr>
					<tr>
					  <td bgcolor="#CCCCCC"><div align="center">396</div></td>
					  <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					  <td bgcolor="#CCCCCC">NetWare over IP</td>
					  </tr>
					<tr>
					  <td bgcolor="#CCCCCC"><div align="center">458</div></td>
					  <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					  <td bgcolor="#CCCCCC">Apple QuickTime</td>
					  </tr>
					<tr>
					  <td bgcolor="#CCCCCC"><div align="center">500 </div></td>
					  <td bgcolor="#CCCCCC"><div align="center">TCP/UDP</div></td>
					  <td bgcolor="#CCCCCC">ISAKMP</td>
					  </tr>
				    </table>
	     	 	 
		     	</p>
				    <p>Съществуват 65 536 използваеми порта. Портове от 0 до 1024  са запазени за предефинирани услуги, като например показаните по горе в таблицата.  Те се наричат още „добре познатите портове&quot; (well-known ports) и се определят от  Internet Assigned Numbers Authority (IANA).</p>
				    <p>Друго важно понятие, широко използвано в компютърните мрежи е понятието <em><strong>сокет</strong></em> (socket).  Общата дефиниция за сокет е „крайната точка на една връзка". За  да може да се осъществи комуникация, трябва да се създаде сокет. 
				    Различните типове сокети използват различни методи за адресиране. Най-популярният метод използва IP адрес, комбиниран с номер на порт, за да идентифицира сокета. В UNIX терминологията това се нарича AFINET адресиране. Втори метод за адресиране, AF_UNIX, за идентификация на сокетите използва имена на пътища. 
				    Berkeley (BSD) Sockets се превърна в стандартния API интерфейс за TCP/IP комуникации. Популярна адаптация на интерфейса е Windows Sockets, или Winsock. Тази реализация предоставя API интерфейс за Интернет приложения, работещи под Windows операционни системи. Winsock се зарежда под формата на DLL.				    </p>
				    
				    <p align="center"><a href=#begin><img src="images/arrw-up.gif" alt="към начакото на страницата" width="153" height="45" /></a></p><hr />
				    <p class="FixedItem"><strong><a name="nt" id="nt"></a>Преобразуване на имена</strong></p>
				    <p> TCP/IP използва IP адреси и номера на портове, за да идентифицира мрежи, компютри и специфични мрежови приложения, до които се изпращат съобщенията. Повечето хора биха  предпочели да използват имена, вместо числа, когато осъществяваме достъп до компютър в мрежата или въвеждаме местоположение на Web сървър във Web браузъра. Но, компютрите работят само с числа. Поради тази несъвместимост се нуждаем от услуги, които превръщат „приятелските" имена в IP адреси. Използвайки тези услуги, когато искаме да посетим сайта на Xerox, можем да въведем www.xerox.com в адресната лента на нашия Web браузър, вместо 208.134.240.50. Името определено е по-лесно за запомняне. Но независимо от нашите действия, нашият браузър конвертира хост името в IP адрес, за да открие Web сървъра в Интернет и да извлече заявената страница. 
				    Какво представлява едно име? 
				    В компютърните мрежови комуникации се използват различни типове имена. В Интернет, имената на хостовете (компютрите) се подреждат в йерархична структура в домейни. Някои от най-известните домейни от най-високо ниво са следните:				    </p>
				    <ul>
                              <ul>
                                <li><strong>com</strong> – Комерсиални организации.</li>
                                <li><strong>edu</strong> – Ограничен за използване от образователни институции  на САЩ.</li>
                                <li><strong>gov</strong> – Ограничен за използване от департаменти на правителството на САЩ.</li>
                                <li><strong>int</strong> – Ограничен за използване от международни организации</li>
                                <li><strong>mil</strong> – Ограничен за използване от образователни институции  на САЩ.</li>
                                <li><strong>net </strong>- По начало предназначен за мрежи на Интернет доставчици</li>
                                <li><strong>org</strong> – Некомерсиални организации.</li>
                                <li><strong><em>xx</em></strong> – Буквен код на държава (съгласно междунаодния стандарт 3166).</li>
                              </ul>
			    </ul>
				    <p>Извън САЩ различните страни имат различни кодове, които се използват за описание на локални домейни. Например: 
				    <ul >
					<li><strong>bg</strong> - България</li> 
				    <li><strong>uk</strong> - Обединеното Кралство</li> 
				    <li><strong>аu</strong> - Австралия</li> 
				    <li><strong>са</strong> - Канада </li>
				    <li><strong>ru</strong> - Русия</li> 
				    <li><strong>fr</strong> - Франция</li> 
				    <li><strong>de</strong> - Германия </li>
				    </ul></p>
				    <p>Бизнесорганизациите, обществените организации и отделните хора регистрират имена на домейни от второ ниво, като например ibm.com, whitehouse.gov или dallas.net, вътре в домейните от най-високо ниво. В началото имената на домейни от второ ниво са назначавани от InterNIC, но сега тази задача е разпределена между няколко упълномощени регистратори. 
				    В един домейн от второ ниво отделните компютри се идентифицират от хост името, името на доменна от второ ниво и името на домейна от най-високо ниво, като всяка секция се разделя с точка. По този начин един Web сървър с име „www" в домейна dallas.net се идентифицира с името www.dallas.net. Това „разделено с точки" йерархично име се нарича напълно квалифицирано име на домейн (fully qualified domain name — FQDN).				    </p>
				    <p>В мрежите на Microsoft на всеки компютър също така се назначава NetBIOS име. Това е име от максимум 16 знака, назначавано от администратора, което се използва за идентифициране на ресурси в локалната мрежа.				    </p>
				    <p>И двата типа имена трябва да се преобразуват в IP адреси, преди да може да се осъществи TCP/IP комуникация. 
				    Съществуват няколко подхода за транслиране на  имена в IP адреси:				    </p>
				    <ul class="B1Item">
				      <li>HOSTS и LMHOSTS файлове, които са чисто текстови и се съхраняват на твърдия диск на компютъра </li>
				      <li>DNS или Dynamic DNS(DDNS) </li>
				      <li>WINS </li>
		        </ul>
				<p></p>
				    <ul class="B2Item"><li><strong><a name="hostfiles" id="hostfiles"></a>HOSTS и LMHOSTS</strong> файлове.</li></ul>
				    <p>В ранните дни на Интернет, методът за съпоставяне на имена на хостове (компютри) с IP адреси за TCP/IP комуникация е бил файлът HOSTS. Това е текстов файл, съхраняван на локалния твърд диск. В него са изброени имената на хостовете и техните съответстващи IP адреси.  
				    Файлът HOSTS е лесен за конструиране и може да се модифицира с всеки текстов редактор (например Windows Notepad). Когато даден потребител се опита да осъществи достъп до друг компютър, използвайки неговото „дружелюбно" име на хост, операционната система прави справка във файла HOSTS, за да разбере „истинската" идентификация - IP адресът. 
				    Само че всеки път, когато нов хост се добавя в мрежата, файлът HOSTS трябва да се обновява ръчно, при това на всички компютри в мрежата. С нарастването на Интернет това се превърна в непосилна задача. 
				    LMHOSTS изпълнява подобна функция в мрежите на Microsoft, като извършва съпоставяне между IP адреси и NetBIOS имена, вместо имена на компютри. Той обаче страда от същия недостатък като HOSTS.; Тъй като е статичен файл, той трябва да се обновява ръчно. 
				    Очевидно е, че има нужда от по-добро средство за съпоставяне на имена и IP адреси.				    </p>
				    <ul class="B2Item"><li><strong><a name="dns" id="dns"></a>DNS и DDNS</strong></li></ul>
				    <p>Системата DNS беше разработена, за да разреши проблемите, свързани с използването на HOSTS файлове. DNS сървърите съхраняват бази данни с двойки IP адрес - име на хост, а TCP/IP свойствата на клиентите се конфигурират с адреса на DNS сървъра. Когато дружелюбно име на хост трябва да се транслира в съответстващия му IP адрес, клиентът се свързва с DNS сървъра. 
				    В Интернет съществува йерархия от DNS сървъри, като отделните 
				    сървъри поддържат DNS информация за техните собствени „зони". Ако DNS сървърът, с който вашият компютър се е &quot;консултирал&quot;, не притежава IP съответствие за въведеното от вас име на хост, той предава заявката към друг DNS сървър, докато информацията не бъде получена. 
				    DNS не е абсолютно задължителен, за да се извършва комуникация по Интернет, но без него всички комуникации трябва да използват IP адреси, вместо имена на хостове. Например, ако в TCP/IP свойствата нямате конфигуриран адpec на DNS сървър, пак можете да осъществявате достъп до Web сайтове, като въвеждате техните IP адреси. Но ако вместо това въведете името на хоста, браузърът няма да може да върне страницата. Адресът на DNS сървъра може да се въведе ръчно или да се получи от DHCP сървър, ако компютърът ви е конфигуриран като DHCP клиент. 
				    DNS е голямо подобрение на локалните HOSTS файлове, тъй като базата данни се съхранява на централен сървър и трябва да я обновявате само там, вместо на всички клиентски машини. Въпреки това базата данни на сървъра пак трябва да се обновява ръчно. Dynamic DNS се справя с този проблем чрез разрешаване на автоматични обновявания на DNS базата данни. Използвайки подобрената версия на DNS, клиентските компютри могат да регистрират и обновяват записите за своите ресурси на DNS сървъра при възникване на промени. 
				    Windows 2000 DNS сървърите и BIND, версия 8, поддържат протоколното разширение DDNS. </p>
				    <ul class="B2Item"><li><strong><a name="wins" id="wins"></a>WINS</strong></li></ul>
				    <p>WINS е друг метод за преобразуване на имена в IP адреси. В този случай NetBIOS имена (използвани за идентифициране на компютри и услуги в мрежи на Microsoft) се съпоставят в база данни на WINS сървър. Windows NT и Windows 2000 сървърите могат да функционират като WINS сървъри. 
				    NetBIOS имената са плоски, а не йерархични както са FQDN имената (DNS хост имената). Докато FQDN за даден сървър може да е exeter.tacteam.net, едно NetBIOS име би било просто Exeter. WINS, подобно на статичния LMHOST файл, може да транслира името в изисквания IP адрес. 
				    WINS, за разлика от оригиналния DNS, използва динамично обновявана база данни. Когато в мрежата се появят WINS клиенти, те обявяват своето присъствие на WINS сървъра, давайки своето име и IP адрес. WINS сървърът изгражда своята база данни от тази информация. 
				    DHCP, DNS и WINS могат да работят заедно в една мрежа. В  
				    операционните системи  на Microsoft Windows 2000 и по-късни версии, трите услуги са интегрирани, за да работят съвместно и ефективно.				    </p>
				    <p>Следната т аблица обобщава методи за преобразуване на имена:				      </p>
				    <div align="center"></div>
				    <table width="703" border="1" align="center">
                      <tr>
                        <th width="132" bgcolor="#CCCCCC" scope="col"><div align="center">Метод за преобразуване на имена</div></th>
                        <th width="204" bgcolor="#CCCCCC" scope="col">Тип на преобразуването</th>
                        <th width="345" bgcolor="#CCCCCC" scope="col">Характеристики </th>
                      </tr>
                      <tr>
                        <td bgcolor="#CCCCCC"><div align="justify">HOSTS файл</div></td>
                        <td bgcolor="#CCCCCC">Имена на хостове в IP адреси</td>
                        <td bgcolor="#CCCCCC">Текстов файл; трябва да се обновява ръчно на всеки компютър </td>
                      </tr>
                      <tr>
                        <td bgcolor="#CCCCCC"><div align="justify">LMHOSTS 	файл</div></td>
                        <td bgcolor="#CCCCCC">NetBIOS имена в IP адреси</td>
                        <td bgcolor="#CCCCCC">Текстов файл; трябва да се обновява ръчно на всеки компютър</td>
                      </tr>
                      <tr>
                        <td bgcolor="#CCCCCC">DNS</td>
                        <td bgcolor="#CCCCCC">Имена на хостове в IP адреси</td>
                        <td bgcolor="#CCCCCC">Централизирана база данни, управлява на от DNS сървър; трябва да се обновява ръчно</td>
                      </tr>
                      <tr>
                        <td bgcolor="#CCCCCC">DDNS</td>
                        <td bgcolor="#CCCCCC">Имена на хостове в IP адреси</td>
                        <td bgcolor="#CCCCCC">Централизирана база данни, управлява на от DNS сървър; може да се обновява динамично</td>
                      </tr>
                      <tr>
                        <td bgcolor="#CCCCCC">WINS</td>
                        <td bgcolor="#CCCCCC">NetBIOS имена в IP адреси</td>
                        <td bgcolor="#CCCCCC">Централизирана база данни, управлява на от WINS сървър; може да се обновява динамично</td>
                      </tr>
                </table>
				    <p>&nbsp;</p>
				    <p align="center"><a href=#begin><img src="images/arrw-up.gif" alt="към начакото на страницата" width="153" height="45" /></a></p>
</div>
		    </div>
		</div>
		<div id="bottom">
		</div>
	</div>
</body>
</html>